(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{81:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var s=r(5155),a=r(2115),l=r(5695),n=r(6874),d=r.n(n),o=r(2895);let i=(0,o.A)("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]),c=(0,o.A)("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);var x=r(4616);let g=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),u=(0,o.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),m=(0,o.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var h=r(5657);let y=(0,o.A)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var b=r(3717),f=r(4416),p=r(6766);function k(e){let{session:t,exercises:r,onToggleExercise:l,onRemoveExercise:n,onDeleteSession:o,onRenameSession:i}=e,[c,x]=(0,a.useState)(!1),[g,u]=(0,a.useState)(t.name),[h,y]=(0,a.useState)(!1),[k,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),N=(0,a.useRef)(null),C=(0,a.useRef)(null),E=(0,a.useRef)(null),S=t.exercises.filter(e=>e.completed).length,A=t.exercises.length,M=A>0?S/A*100:0,O=()=>{g.trim()&&g.trim()!==t.name&&i(t.id,g.trim()),x(!1)},L=(0,a.useCallback)(()=>{u(t.name),x(!1)},[t.name]),z=e=>{j(e),y(!0)},R=(0,a.useCallback)(()=>{y(!1),j(null)},[]),J=(0,a.useCallback)(()=>{v(!1)},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(c&&L(),h&&R(),k&&J())};return window.addEventListener("keydown",e),c||h||k?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{window.removeEventListener("keydown",e),document.body.style.overflow=""}},[c,h,k,L,R,J]),(0,a.useEffect)(()=>{let e=e=>{c&&N.current&&!N.current.contains(e.target)&&L(),h&&C.current&&!C.current.contains(e.target)&&R(),k&&E.current&&!E.current.contains(e.target)&&J()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c,h,k,L,R,J]);let D="https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=100",T=e=>{if(e)if(e.startsWith("http"))return e;else return"/images/".concat(e);return D};return(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>x(!0),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>{v(!0)},className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,s.jsx)(m,{className:"h-4 w-4"})})]})]}),c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:N,className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"ویرایش نام جلسه"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O()},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:O,className:"w-full flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"تأیید"}),(0,s.jsx)("button",{onClick:L,className:"w-full flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:C,className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"این تمرین حذف شود؟"}),(0,s.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{w&&n(t.id,w),y(!1),j(null)},className:"w-full flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,s.jsx)("button",{onClick:R,className:"w-full flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),k&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:E,className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"این جلسه حذف شود؟"}),(0,s.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{o(t.id),v(!1)},className:"w-full flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,s.jsx)("button",{onClick:J,className:"w-full flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[(0,s.jsx)("span",{children:"پیشرفت"}),(0,s.jsxs)("span",{children:[S," از ",A]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(M,"%")}})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[t.exercises.map(e=>{let a=r.find(t=>t.id===e.exerciseId);return a?(0,s.jsxs)("div",{className:"relative flex items-center space-x-3 space-x-reverse p-3 bg-gray-50 dark:bg-gray-700 rounded-lg flex-wrap",children:[(0,s.jsx)("button",{onClick:()=>z(a.id),className:"left-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"relative w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden",children:(0,s.jsx)(p.default,{src:T(a.image),alt:a.name,fill:!0,sizes:"48px",style:{objectFit:"cover"},onError:e=>{e.target.src=D}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 mt-1 sm:mt-0",children:[(0,s.jsx)(d(),{href:"/exercise/".concat(a.id),className:"text-sm text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 break-words",children:a.name}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:a.targetMuscles.length>2&&(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",a.targetMuscles.length-2]})}),e.notes&&(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 break-words",children:e.notes})]}),(0,s.jsx)("div",{className:"flex items-center ml-auto",children:(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>l(t.id,a.id),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})})]},e.exerciseId):null}),0===t.exercises.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"هنوز تمرینی اضافه نشده!"})]})]})}var v=r(9925),w=r(115);function j(e){let{isOpen:t,onClose:r,onCreateSession:l}=e,[n,d]=(0,a.useState)(""),o=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()},s=e=>{o.current&&!o.current.contains(e.target)&&r()};return t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",s)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",s)}},[t,r]),(0,a.useEffect)(()=>{t&&d("")},[t]);let i=()=>{n.trim()&&(l(n.trim()),r())};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",children:(0,s.jsxs)("div",{ref:o,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ایجاد جلسه جدید"}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"session-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"نام جلسه:"}),(0,s.jsx)("input",{type:"text",id:"session-name",value:n,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&i()},placeholder:"جلسه ۱",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex space-x-3 space-x-reverse flex-shrink-0",children:[(0,s.jsx)("button",{onClick:i,disabled:!n.trim(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"ایجاد"}),(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}):null}var N=r(2056);function C(e){let{isOpen:t,onClose:r,onUpdateUserData:l,showToast:n}=e,d=(0,a.useRef)(null),o=(0,a.useRef)(null),[i,c]=(0,a.useState)(""),[x,u]=(0,a.useState)(null),[h,y]=(0,a.useState)("json");(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()},s=e=>{d.current&&!d.current.contains(e.target)&&r()};return t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",s)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",s)}},[t,r]),(0,a.useEffect)(()=>{t&&(c(""),u(null),o.current&&(o.current.value=""),y("json"))},[t]);let b=async()=>{let e=null;if("json"===h&&i.trim())try{if(!(e=JSON.parse(i))||!Array.isArray(e.sessions))throw Error("ساختار JSON نامعتبر است.");e.sessions=e.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())}))}catch(e){n("خطا در تجزیه JSON: "+e.message,"delete");return}else if("file"!==h||!x)return void n("لطفاً کد JSON را وارد کنید یا یک فایل انتخاب کنید.","delete");else try{e=await (0,N.Xc)(x)}catch(e){n("خطا در وارد کردن فایل: "+e.message,"delete");return}e&&((0,N.Ts)(e),l(e),n("داده‌ها با موفقیت وارد شدند","success"),r())},p="json"===h&&!i.trim()||"file"===h&&!x;return t?(0,s.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",children:[" ",(0,s.jsxs)("div",{ref:d,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-lg w-full max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)(g,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"}),(0,s.jsx)("span",{children:"وارد کردن برنامه"})]}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-right",children:"می‌توانید کد JSON برنامه را مستقیماً وارد کنید یا یک فایل JSON را آپلود کنید."}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-900 dark:text-white mb-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"importMethod",value:"json",checked:"json"===h,onChange:()=>y("json"),className:"ml-2 h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),"کد JSON:"]}),(0,s.jsxs)("div",{className:"relative h-40",children:[" ",(0,s.jsx)("textarea",{id:"json-input",value:i,onChange:e=>{c(e.target.value)},placeholder:'{ "sessions": [...] }',rows:8,dir:"ltr",className:"w-full h-full px-3 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none pr-10\n                ".concat("json"===h?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700 cursor-not-allowed opacity-70"),disabled:"json"!==h}),i.trim().length>0&&"json"===h&&(0,s.jsx)("button",{onClick:()=>{c("")},className:"absolute top-3 right-3 p-1 rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors","aria-label":"پاک کردن کد JSON",children:(0,s.jsx)(m,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-900 dark:text-white mb-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"importMethod",value:"file",checked:"file"===h,onChange:()=>y("file"),className:"ml-2 h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),"آپلود فایل JSON:"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse bg-gray-100 dark:bg-gray-700 rounded-md p-2 w-full flex-nowrap",dir:"ltr",children:[(0,s.jsx)("input",{ref:o,id:"file-upload",type:"file",accept:".json",onChange:e=>{var t;u((null==(t=e.target.files)?void 0:t[0])||null)},className:"flex-grow text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 dark:file:bg-blue-800 dark:file:text-white dark:hover:file:bg-blue-900 min-w-0\n                ".concat("file"===h?"":"cursor-not-allowed opacity-70"),disabled:"file"!==h}),(0,s.jsx)("button",{onClick:()=>{u(null),o.current&&(o.current.value="")},disabled:!x||"file"!==h,className:"p-2 rounded-lg transition-colors flex-shrink-0 ".concat(x&&"file"===h?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/40":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"),"aria-label":"حذف فایل انتخاب شده",children:(0,s.jsx)(m,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("p",{className:"text-sm text-blue-500 dark:text-blue-400 mb-6 text-right",children:"ℹ️ داده‌های فعلی با داده‌های وارد شده جایگزین می‌شوند. این عملیات قابل بازگشت نیست."}),(0,s.jsxs)("div",{className:"flex space-x-3 space-x-reverse flex-shrink-0",children:[(0,s.jsx)("button",{onClick:b,disabled:p,className:"flex-1 px-4 py-2 rounded-lg transition-colors ".concat(p?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400":"bg-blue-600 text-white hover:bg-blue-700"),children:"تأیید"}),(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})]}):null}var E=r(4357);function S(e){let{isOpen:t,onClose:r,userData:l,showToast:n}=e,d=(0,a.useRef)(null),o=(0,a.useRef)(null),[i,c]=(0,a.useState)("idle");(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()},s=e=>{d.current&&!d.current.contains(e.target)&&r()};return t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",s)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",s)}},[t,r]);let x=JSON.stringify(l,null,2);return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:d,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-lg w-full mx-4 max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)(u,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})," ",(0,s.jsx)("span",{children:"دانلود برنامه"})]}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-right",children:"این کد JSON حاوی تمام برنامه‌های تمرینی ذخیره شده شماست."}),(0,s.jsxs)("div",{className:"mb-4 relative flex-grow overflow-y-auto rounded-lg bg-gray-100 dark:bg-gray-700 p-4",children:[(0,s.jsx)("textarea",{ref:o,readOnly:!0,value:x,rows:10,className:"w-full h-full bg-transparent text-gray-900 dark:text-white text-sm leading-relaxed resize-none outline-none border-none overflow-auto pr-10",dir:"ltr"}),(0,s.jsx)("button",{onClick:()=>{o.current&&(o.current.select(),document.execCommand("copy"),c("copied"),setTimeout(()=>c("idle"),2e3))},className:"absolute top-2 right-2 p-1 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors","aria-label":"copied"===i?"کپی شد!":"کپی به کلیپ بورد",children:"copied"===i?(0,s.jsx)("span",{className:"text-xs",children:"کپی شد!"}):(0,s.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex space-x-3 space-x-reverse flex-shrink-0 mt-auto",children:[(0,s.jsx)("button",{onClick:()=>{(0,N.i4)(),n("برنامه با موفقیت دانلود شد","success"),r()},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"دانلود"}),(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}):null}let A=e=>{let{activeTab:t,setActiveTab:r,router:s}=e,n=(0,l.useSearchParams)();return(0,a.useEffect)(()=>{let e=n.get("sessionId");e&&(t!==e&&r(e),s.replace("/my-workouts"))},[n,t,r,s]),null};function M(){let e=(0,l.useRouter)(),[t,r]=(0,w.M)("tamrinsaz-user-data",{sessions:[]}),[n,o]=(0,w.M)("workout-active-tab","all"),[b,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f(window.matchMedia("(min-width: 768px)").matches)},[]);let p=(0,a.useRef)(null),[E,M]=(0,a.useState)(!1),[O,L]=(0,a.useState)(!1),[z,R]=(0,a.useState)(!1),[J,D]=(0,a.useState)(!1),[T,I]=(0,a.useState)(!1),[F,H]=(0,a.useState)(null),[P,U]=(0,a.useState)(null),_=(0,a.useRef)(null),V=(0,a.useRef)(null),q=e=>{(0,N.Ts)(e),r(e)},K=()=>window.matchMedia("(max-width: 767px)").matches;(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(f(!1),M(!1),L(!1),R(!1),D(!1),I(!1))},t=e=>{K()&&p.current&&!p.current.contains(e.target)&&f(!1),_.current&&!_.current.contains(e.target)&&L(!1),V.current&&!V.current.contains(e.target)&&R(!1)};return(b||E||O||z||J||T)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",t)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[b,E,O,z,J,T]);let B=t.sessions.filter(e=>"all"===n||e.id===n),X=(e,r)=>{q({sessions:t.sessions.map(t=>t.id===e?{...t,exercises:t.exercises.map(e=>e.exerciseId===r?{...e,completed:!e.completed}:e)}:t)})},$=(e,r)=>{q({sessions:t.sessions.map(t=>t.id===e?{...t,exercises:t.exercises.filter(e=>e.exerciseId!==r)}:t)})},W=e=>{q({sessions:t.sessions.filter(t=>t.id!==e)}),n===e&&o("all"),G("جلسه با موفقیت حذف شد","delete")},Z=(e,r)=>{q({sessions:t.sessions.map(t=>t.id===e?{...t,name:r}:t)}),G("نام جلسه با موفقیت تغییر یافت","success")},G=(e,t)=>{H(e),U(t)};return(0,a.useEffect)(()=>{if(F){let e=setTimeout(()=>{H(null),U(null)},3e3);return()=>clearTimeout(e)}},[F]),(0,s.jsxs)("div",{className:"relative min-h-screen flex flex-col md:flex-row",children:[(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsx)(A,{activeTab:n,setActiveTab:o,router:e})}),!b&&(0,s.jsx)("button",{onClick:()=>f(!0),className:"md:hidden fixed bottom-[2.5rem] right-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 p-3 rounded-full shadow-lg z-40 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors","aria-label":"باز کردن منو",children:(0,s.jsx)(i,{className:"h-6 w-6"})}),!b&&(0,s.jsx)("button",{onClick:()=>f(!0),className:"hidden md:block fixed top-1/2 -translate-y-1/2 right-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 p-3 rounded-full shadow-lg z-40 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors","aria-label":"باز کردن پنل",children:(0,s.jsx)(i,{className:"h-6 w-6"})}),b&&K()&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>f(!1)}),(0,s.jsxs)("div",{ref:p,className:"fixed top-0 bottom-0 right-0 w-64 h-full bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-lg z-50 p-4 flex flex-col transition-transform duration-300 ease-in-out\n          ".concat(b?"translate-x-0":"translate-x-full","\n          md:top-0 md:h-full md:w-64 md:").concat(b?"translate-x-0":"translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex justify-end items-center mb-6",children:[(0,s.jsx)("button",{onClick:()=>f(!1),className:"md:hidden text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"بستن پنل",children:(0,s.jsx)(c,{className:"h-6 w-6"})}),(0,s.jsx)("button",{onClick:()=>f(!1),className:"hidden md:block text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"بستن پنل",children:(0,s.jsx)(c,{className:"h-6 w-6"})})]}),(0,s.jsxs)("nav",{className:"flex flex-col space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>{M(!0),K()&&f(!1)},className:"w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"جلسه جدید"})]}),(0,s.jsxs)("button",{onClick:()=>{I(!0),K()&&f(!1)},className:"w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(g,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"وارد کردن برنامه"})]}),(0,s.jsxs)("button",{onClick:()=>{D(!0),K()&&f(!1)},className:"w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(u,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"دانلود برنامه"})]}),(0,s.jsxs)("button",{onClick:()=>{L(!0),K()&&f(!1)},className:"w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[(0,s.jsx)(m,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"حذف برنامه"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("hr",{}),(0,s.jsxs)(d(),{href:"/ai-workout-generator",onClick:()=>{K()&&f(!1)},className:"mt-8 w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(h.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"ساخت برنامه با AI"})]}),(0,s.jsxs)("button",{onClick:()=>{R(!0),K()&&f(!1)},className:"w-full flex items-center space-x-3 space-x-reverse px-4 py-2 text-right text-base font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(y,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"راهنما"})]})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"برنامه من"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[t.sessions.length," جلسه تمرینی"]})]}),(0,s.jsxs)("div",{className:"hidden md:flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto whitespace-nowrap",children:[(0,s.jsx)("button",{onClick:()=>o("all"),className:"flex-shrink-0 px-4 py-2 text-center text-sm font-medium rounded-t-lg transition-colors\n                ".concat("all"===n?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"همه"}),t.sessions.map(e=>(0,s.jsx)("button",{onClick:()=>o(e.id),className:"flex-shrink-0 px-4 py-2 text-center text-sm font-medium rounded-t-lg transition-colors\n                  ".concat(n===e.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:e.name},e.id))]}),(0,s.jsxs)("div",{className:"md:hidden mb-6",children:[(0,s.jsx)("label",{htmlFor:"session-select",className:"sr-only",children:"انتخاب جلسه"}),(0,s.jsxs)("select",{id:"session-select",value:n,onChange:e=>o(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"همه جلسات"}),t.sessions.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),B.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:B.map(e=>(0,s.jsx)(k,{session:e,exercises:v.K,onToggleExercise:X,onRemoveExercise:$,onDeleteSession:W,onRenameSession:Z},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"all"===n?"هنوز جلسه‌ای ایجاد نشده!":"هیچ تمرینی در این جلسه یافت نشد."}),"all"===n&&(0,s.jsx)("p",{className:"text-gray-400 dark:text-gray-500",children:"برای شروع، یک جلسه جدید ایجاد کنید و سپس از صفحه اصلی تمرینات را اضافه کنید"})]})]})}),(0,s.jsx)(j,{isOpen:E,onClose:()=>M(!1),onCreateSession:e=>{let r={id:Date.now().toString(),name:e,exercises:[],createdAt:new Date};q({sessions:[...t.sessions,r]}),M(!1),o(r.id),G("جلسه با موفقیت ایجاد شد","success")}}),(0,s.jsx)(C,{isOpen:T,onClose:()=>I(!1),onUpdateUserData:q,showToast:G}),(0,s.jsx)(S,{isOpen:J,onClose:()=>D(!1),userData:t,showToast:G}),O&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:_,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"حذف برنامه"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"با حذف برنامه تمامی جلسات و تمرینات شما حذف خواهد شد. این عمل قابل بازگشت نیست."}),(0,s.jsxs)("div",{className:"flex space-x-3 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{(0,N.f$)(),q({sessions:[]}),L(!1),G("تمام داده‌ها پاک شدند","delete")},className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors",children:"حذف"}),(0,s.jsx)("button",{onClick:()=>L(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),z&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:V,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"راهنما"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-right",children:["این سایت یک سایت استاتیک است و امکان ثبت‌نام یا ذخیره‌سازی دائمی اطلاعات شما را ندارد. تمام داده‌های شما فقط در مرورگر شما ذخیره می‌شوند و با پاک‌کردن تاریخچه (History) یا کش (Cache)، این اطلاعات نیز از بین می‌روند.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"برای نگهداری داده‌ها یا انتقال آن‌ها به مرورگر یا دستگاهی دیگر، لطفاً از گزینه \xabدانلود برنامه\xbb استفاده کنید. با این کار، یک فایل JSON دریافت می‌کنید که می‌توانید آن را از طریق گزینه \xabوارد کردن برنامه\xbb دوباره بارگذاری کرده و اطلاعات خود را بازیابی کنید."]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>R(!1),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"بستن"})})]})}),F&&(0,s.jsx)("div",{className:"fixed top-6 right-6 z-50 px-4 py-2 rounded-md shadow-lg animate-fade-in-out ".concat("success"===P?"bg-green-200 dark:bg-green-300 text-gray-800 dark:text-gray-900":"bg-red-200 dark:bg-red-300 text-gray-800 dark:text-gray-900"),children:F})]})}},115:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var s=r(2115);function a(e,t){let[r,a]=(0,s.useState)(t);return(0,s.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&a(JSON.parse(t))}catch(t){console.error('Error reading localStorage key "'.concat(e,'" in useEffect:'),t)}},[e]),[r,t=>{try{let s=t instanceof Function?t(r):t;a(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}}]}},2056:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>l,Xc:()=>d,f$:()=>o,gL:()=>a,i4:()=>n});let s="tamrinsaz-user-data",a=()=>{try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);return t.sessions=t.sessions.map(e=>({...e,createdAt:new Date(e.createdAt)})),t}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},l=e=>{try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error saving user data:",e)}},n=()=>{let e=new Blob([JSON.stringify(a(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},d=e=>new Promise((t,r)=>{let s=new FileReader;s.onload=e=>{try{var s;let a=JSON.parse(null==(s=e.target)?void 0:s.result);a.sessions&&Array.isArray(a.sessions)?(a.sessions=a.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())})),t(a)):r(Error("Invalid data format"))}catch(e){r(e)}},s.onerror=()=>r(Error("Failed to read file")),s.readAsText(e)}),o=()=>{localStorage.removeItem(s)}},3717:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4357:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5657:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},6813:(e,t,r)=>{Promise.resolve().then(r.bind(r,81))}},e=>{var t=t=>e(e.s=t);e.O(0,[15,766,925,441,684,358],()=>t(6813)),_N_E=e.O()}]);