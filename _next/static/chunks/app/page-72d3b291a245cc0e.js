(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{115:(e,r,s)=>{"use strict";s.d(r,{M:()=>a});var t=s(2115);function a(e,r){let[s,a]=(0,t.useState)(r);return(0,t.useEffect)(()=>{try{let r=window.localStorage.getItem(e);r&&a(JSON.parse(r))}catch(r){console.error('Error reading localStorage key "'.concat(e,'" in useEffect:'),r)}},[e]),[s,(0,t.useCallback)(r=>{try{a(s=>{let t=r instanceof Function?r(s):r;return window.localStorage.setItem(e,JSON.stringify(t)),t})}catch(r){console.error('Error setting localStorage key "'.concat(e,'":'),r)}},[e])]}},1556:(e,r,s)=>{Promise.resolve().then(s.bind(s,7798))},7798:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y});var t=s(5155),a=s(2115),l=s(2895);let i=(0,l.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function n(e){let{value:r,onChange:s,placeholder:a="جستجوی تمرینات..."}=e;return(0,t.jsxs)("div",{className:"relative w-full md:w-auto",children:[(0,t.jsx)(i,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",value:r,onChange:e=>s(e.target.value),placeholder:a,className:"w-full pr-10 pl-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}var o=s(6874),c=s.n(o),d=s(6766);function u(e){let{exercise:r,sessionName:s}=e,a="https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=400";return(0,t.jsxs)(c(),{href:"/exercise/".concat(r.id),className:"group block bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600",children:[(0,t.jsxs)("div",{className:"relative w-full h-48",children:[" ",(0,t.jsx)(d.default,{src:(e=>{if(e)if(e.startsWith("http"))return e;else return"/images/".concat(e);return a})(r.image),alt:r.name,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",style:{objectFit:"cover"},onError:e=>{e.target.src=a}}),s&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full z-10",children:[" ",s]})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.name}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:r.targetMuscles.map((e,r)=>(0,t.jsx)("span",{className:"inline-block bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs px-2 py-1 rounded-full",children:e},r))}),(0,t.jsx)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:(0,t.jsx)("span",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:r.equipment})})]})]})}function x(e){let{exercises:r,getSessionName:s}=e;return 0===r.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"هیچ تمرینی یافت نشد"})}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(e=>(0,t.jsx)(u,{exercise:e,sessionName:null==s?void 0:s(e.id)},e.id))})}var g=s(9925);let h=(0,l.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=s(115),p=s(5695);let b=(0,s(5028).default)(()=>s.e(499).then(s.bind(s,6499)).then(e=>e.FilterPanel),{loadableGenerated:{webpack:()=>[6499]},ssr:!1}),f=e=>{let{setFilters:r,filters:s,router:t,pathname:l}=e,i=(0,p.useSearchParams)();return(0,a.useEffect)(()=>{let e=i.get("filterField"),a=i.get("filterValue");if(e&&a){let i=decodeURIComponent(a),n={id:Date.now().toString(),field:e,values:[i]};s.some(e=>e.field===n.field&&e.values.includes(i))||r([n]),t.replace(l)}},[i,r,t,l,s]),null};function y(){let[e,r]=(0,a.useState)(""),[s,l]=(0,m.M)("tamrinsaz-filters",[]),[i,o]=(0,a.useState)(20),[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),[y,v]=(0,a.useState)(!1),w=(0,p.useRouter)(),j=(0,p.usePathname)(),[k,N]=(0,m.M)("tamrinsaz-user-data",{sessions:[]}),C=(0,a.useCallback)(e=>{if(k&&k.sessions)for(let r of k.sessions){let s=Array.isArray(r.items)?r.items:[],t="exercises"in r&&Array.isArray(r.exercises)?r.exercises:[];if(s.length>0){if(s.some(r=>{var s,t;return"single"===r.type?(null==(s=r.exercise)?void 0:s.exerciseId)===e:"superset"===r.type&&(null==(t=r.exercises)?void 0:t.some(r=>r.exerciseId===e))}))return r.name}else if(t.length>0&&t.some(r=>r.exerciseId===e))return r.name}},[k]),S=(0,a.useMemo)(()=>{let r=[...g.K];if(e){let s=e.toLowerCase();r=r.filter(e=>e.name.toLowerCase().includes(s)||e.targetMuscles.some(e=>e.toLowerCase().includes(s))||e.equipment.toLowerCase().includes(s)||e.type&&e.type.toLowerCase().includes(s)||e.otherNames&&e.otherNames.toLowerCase().includes(s))}return s.forEach(e=>{e.values.length>0&&(r=r.filter(r=>"equipment"===e.field?e.values.includes(r.equipment):"targetMuscles"===e.field?r.targetMuscles.some(r=>e.values.includes(r)):"type"!==e.field||r.type&&e.values.includes(r.type)))}),r.sort((e,r)=>e.name.localeCompare(r.name,"fa",{sensitivity:"base"})),r},[e,s]),E=S.slice(0,i),M=S.length>E.length;(0,a.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&M&&!c&&(d(!0),setTimeout(()=>{o(e=>e+20),d(!1)},500))},{threshold:1}),r=u.current;return r&&e.observe(r),()=>{r&&e.unobserve(r)}},[M,c,u,o]);let A=(0,a.useMemo)(()=>{let e=0;return s.forEach(r=>{e+=r.values.length}),e},[s]),F=A>0;return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(f,{setFilters:l,filters:s,router:w,pathname:j})}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"تمرینات"}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[S.length," تمرین یافت شد"]})]}),(0,t.jsxs)("div",{className:"mb-8 flex flex-wrap gap-4",children:[(0,t.jsx)(n,{value:e,onChange:r,placeholder:"جستجوی تمرینات..."}),(0,t.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-lg border transition-colors ".concat(F?"bg-blue-50 border-blue-300 text-blue-700 dark:bg-blue-900/20 dark:border-blue-600 dark:text-blue-300":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,t.jsx)(h,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"فیلتر"}),F&&(0,t.jsxs)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:[A," "]})]})]}),(0,t.jsx)(x,{exercises:E,getSessionName:C}),M&&(0,t.jsx)("div",{ref:u,className:"flex justify-center mt-8",children:c?(0,t.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:"در حال بارگذاری..."})]}):(0,t.jsx)("div",{className:"text-gray-500 dark:text-gray-400"})}),y&&(0,t.jsx)(b,{isOpen:y,onClose:()=>v(!1),currentFilters:s,onApplyFilters:l})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[508,771,925,441,684,358],()=>r(1556)),_N_E=e.O()}]);