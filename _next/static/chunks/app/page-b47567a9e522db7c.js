(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{115:(e,r,t)=>{"use strict";t.d(r,{M:()=>a});var s=t(2115);function a(e,r){let[t,a]=(0,s.useState)(r);return(0,s.useEffect)(()=>{try{let r=window.localStorage.getItem(e);r&&a(JSON.parse(r))}catch(r){console.error('Error reading localStorage key "'.concat(e,'" in useEffect:'),r)}},[e]),[t,r=>{try{let s=r instanceof Function?r(t):r;a(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(r){console.error('Error setting localStorage key "'.concat(e,'":'),r)}}]}},1556:(e,r,t)=>{Promise.resolve().then(t.bind(t,7798))},7798:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var s=t(5155),a=t(2115),l=t(2895);let n=(0,l.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function i(e){let{value:r,onChange:t,placeholder:a="جستجوی تمرینات..."}=e;return(0,s.jsxs)("div",{className:"relative w-full md:w-auto",children:[(0,s.jsx)(n,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>t(e.target.value),placeholder:a,className:"w-full pr-10 pl-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}var o=t(6874),c=t.n(o),d=t(6766);function u(e){let{exercise:r,sessionName:t}=e,a="https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=400";return(0,s.jsxs)(c(),{href:"/exercise/".concat(r.id),className:"group block bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600",children:[(0,s.jsxs)("div",{className:"relative w-full h-48",children:[" ",(0,s.jsx)(d.default,{src:(e=>{if(e)if(e.startsWith("http"))return e;else return"/images/".concat(e);return a})(r.image),alt:r.name,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",style:{objectFit:"cover"},onError:e=>{e.target.src=a}}),t&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full z-10",children:[" ",t]})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.name}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:r.targetMuscles.map((e,r)=>(0,s.jsx)("span",{className:"inline-block bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs px-2 py-1 rounded-full",children:e},r))}),(0,s.jsx)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:(0,s.jsx)("span",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:r.equipment})})]})]})}function x(e){let{exercises:r,getSessionName:t}=e;return 0===r.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"هیچ تمرینی یافت نشد"})}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(e=>(0,s.jsx)(u,{exercise:e,sessionName:null==t?void 0:t(e.id)},e.id))})}var g=t(9925);let h=(0,l.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=t(115),p=t(5695),b=t(2144);let f=e=>{let{setFilters:r,filters:t,router:s,pathname:l}=e,n=(0,p.useSearchParams)();return(0,a.useEffect)(()=>{let e=n.get("filterField"),a=n.get("filterValue");if(e&&a){let n=decodeURIComponent(a),i={id:Date.now().toString(),field:e,values:[n]};t.some(e=>e.field===i.field&&e.values.includes(n))||r([i]),s.replace(l)}},[n,r,s,l,t]),null};function y(){let[e,r]=(0,a.useState)(""),[t,l]=(0,m.M)("tamrinsaz-filters",[]),[n,o]=(0,a.useState)(20),[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),[y,v]=(0,a.useState)(!1),w=(0,p.useRouter)(),j=(0,p.usePathname)(),[k,N]=(0,m.M)("tamrinsaz-user-data",{sessions:[]}),S=(0,a.useMemo)(()=>{let r=[...g.K];if(e){let t=e.toLowerCase();r=r.filter(e=>e.name.toLowerCase().includes(t)||e.targetMuscles.some(e=>e.toLowerCase().includes(t))||e.equipment.toLowerCase().includes(t)||e.otherNames&&e.otherNames.toLowerCase().includes(t))}return t.forEach(e=>{e.values.length>0&&(r=r.filter(r=>"equipment"===e.field?e.values.includes(r.equipment):"targetMuscles"!==e.field||r.targetMuscles.some(r=>e.values.includes(r))))}),o(20),r},[e,t]),C=S.slice(0,n),E=S.length>C.length;(0,a.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&E&&!c&&(d(!0),setTimeout(()=>{o(e=>e+20),d(!1)},500))},{threshold:1}),r=u.current;return r&&e.observe(r),()=>{r&&e.unobserve(r)}},[E,c,u]);let M=t.some(e=>e.values.length>0);return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsx)(f,{setFilters:l,filters:t,router:w,pathname:j})}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"تمرینات"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[S.length," تمرین یافت شد"]})]}),(0,s.jsxs)("div",{className:"mb-8 flex flex-wrap gap-4",children:[(0,s.jsx)(i,{value:e,onChange:r,placeholder:"جستجوی تمرینات..."}),(0,s.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-lg border transition-colors ".concat(M?"bg-blue-50 border-blue-300 text-blue-700 dark:bg-blue-900/20 dark:border-blue-600 dark:text-blue-300":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,s.jsx)(h,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"فیلتر"}),M&&(0,s.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:t.length})]})]}),(0,s.jsx)(x,{exercises:C,getSessionName:e=>{if(k&&k.sessions){for(let r of k.sessions)if(r.exercises.some(r=>r.exerciseId===e))return r.name}}}),E&&(0,s.jsx)("div",{ref:u,className:"flex justify-center mt-8",children:c?(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"در حال بارگذاری..."})]}):(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400"})}),(0,s.jsx)(b.ZN,{isOpen:y,onClose:()=>v(!1),currentFilters:t,onApplyFilters:l})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[15,766,925,144,441,684,358],()=>r(1556)),_N_E=e.O()}]);