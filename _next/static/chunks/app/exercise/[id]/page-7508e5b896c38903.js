(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{873:(e,t,s)=>{"use strict";s.d(t,{default:()=>k});var r=s(5155),a=s(2115),l=s(6874),i=s.n(l),n=s(5695),d=s(6766),o=s(2895);let c=(0,o.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var x=s(4616);let u=(0,o.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=s(3717),g=s(3104),h=s(4416),p=s(9925),y=s(5028),b=s(2056);let f=(0,y.default)(()=>s.e(762).then(s.bind(s,9762)).then(e=>e.AddToWorkoutModal),{loadableGenerated:{webpack:()=>[9762]},ssr:!1}),v=e=>e?e.startsWith("http")?e:"/images/".concat(e):"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=800";function k(e){let{id:t}=e,s=(0,n.useRouter)(),[l,o]=(0,a.useState)(!1),[y,k]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[w,I]=(0,a.useState)(null),A=(0,a.useRef)(null),[E,S]=(0,a.useState)(!1),[C,L]=(0,a.useState)(null),[M,R]=(0,a.useState)(null),[_,O]=(0,a.useState)(""),[z,F]=(0,a.useState)(""),[q,D]=(0,a.useState)(""),T=(0,a.useRef)(null),[U,K]=(0,a.useState)({sessions:[]}),J=e=>{(0,b.Ts)(e),K(e)};(0,a.useEffect)(()=>{K((0,b.gL)())},[]);let P=(0,a.useCallback)(()=>{S(!1),L(null),R(null),O(""),F(""),D("")},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(l&&o(!1),y&&(k(!1),N(null),I(null)),E&&P())},t=e=>{var t;l&&document.getElementById("add-to-workout-modal-container")&&!(null==(t=document.getElementById("add-to-workout-modal-container"))?void 0:t.contains(e.target))&&o(!1),y&&A.current&&!A.current.contains(e.target)&&(k(!1),N(null),I(null)),E&&T.current&&!T.current.contains(e.target)&&P()};return(l||y||E)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",t)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[l,y,E,P]);let B=p.K.find(e=>e.id===t);if(!B)return(0,r.jsx)("div",{className:"max-w-[35rem] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"تمرین یافت نشد"}),(0,r.jsxs)(i(),{href:"/",className:"inline-flex items-center space-x-2 space-x-reverse text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,r.jsx)(c,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"بازگشت به صفحه اصلی"})]})]})});let H=(e,t)=>{let s=[];for(let r=0;r<e.length;r++){let a=e[r];if("single"===a.type&&a.exercise.exerciseId===t&&s.push({itemIndex:r,exercise:a.exercise,item:a}),"superset"===a.type){let e=a.exercises.find(e=>e.exerciseId===t);e&&s.push({itemIndex:r,exercise:e,item:a})}}return s},V=U.sessions.flatMap(e=>H(e.items,B.id).map(t=>({session:e,sessionExercise:t.exercise,itemIndex:t.itemIndex,item:t.item}))),W=(e,t)=>{N(e),I(t),k(!0)},X=(e,t,s)=>{L(e),D(e),R({itemIndex:t,item:s}),"single"===s.type?(O(s.exercise.notes||""),F("")):0===s.exercises.findIndex(e=>e.exerciseId===B.id)?(O(s.exercises[0].notes||""),F(s.exercises[1].notes||"")):(O(s.exercises[1].notes||""),F(s.exercises[0].notes||"")),S(!0)},Z=()=>{let e;if(!C||!M||!B)return;let t=[...U.sessions],s=t.findIndex(e=>e.id===C);if(-1===s)return;let r=t[s],a=r.items[M.itemIndex];if("single"===a.type)e={type:"single",exercise:{...a.exercise,notes:_.trim()||void 0}};else{let t=a.exercises.findIndex(e=>e.exerciseId===B.id),s=[...a.exercises];0===t?(s[0]={...s[0],notes:_.trim()||void 0},s[1]={...s[1],notes:z.trim()||void 0}):(s[1]={...s[1],notes:_.trim()||void 0},s[0]={...s[0],notes:z.trim()||void 0}),e={type:"superset",exercises:s}}if(q!==C){t[s]={...r,items:r.items.filter((e,t)=>t!==M.itemIndex)};let a=t.findIndex(e=>e.id===q);-1!==a&&(t[a]={...t[a],items:[...t[a].items,e]})}else t[s]={...r,items:r.items.map((t,s)=>s===M.itemIndex?e:t)};J({sessions:t}),P()},G=e=>{"Enter"===e.key&&Z()},$=e=>{s.push("/?filterField=targetMuscles&filterValue=".concat(encodeURIComponent(e)))},Q=e=>{s.push("/?filterField=equipment&filterValue=".concat(encodeURIComponent(e)))},Y=e=>{s.push("/?filterField=type&filterValue=".concat(encodeURIComponent(e)))};return(0,r.jsxs)("main",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 max-w-7xl mx-auto px-1 sm:px-2 lg:px-8 my-8",children:[(0,r.jsxs)("div",{className:"col-span-1 md:col-span-4 rounded-lg space-y-6",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-fit",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:B.name}),B.otherNames&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:B.otherNames}),(0,r.jsxs)("div",{className:"flex flex-col divide-y-2 divide-gray-100 dark:divide-gray-200/10",children:[(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"عضلات درگیر:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:B.targetMuscles.map((e,t)=>(0,r.jsx)("button",{onClick:()=>$(e),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"وسایل مورد نیاز:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:B.equipment&&(0,r.jsx)("button",{onClick:()=>Q(B.equipment),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:B.equipment})})]}),B.type&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"نوع تمرین:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsx)("button",{onClick:()=>Y(B.type),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:B.type})})]})})]})]}),B.description&&(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"شرح تمرین"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400 leading-relaxed [&_a]:text-blue-600 [&_a]:hover:text-blue-700 dark:[&_a]:text-blue-400 dark:[&_a]:hover:text-blue-300",dangerouslySetInnerHTML:{__html:B.description}})]})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2 p-4 border rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-fit",children:[(0,r.jsx)("div",{className:"relative aspect-video flex items-center justify-center rounded-lg overflow-hidden mb-8",children:(0,r.jsx)(d.default,{src:v(B.image),alt:B.name,fill:!0,sizes:"(max-width: 768px) 100vw, 20rem",style:{objectFit:"cover"},priority:!0})}),(0,r.jsxs)("button",{onClick:()=>o(!0),className:"w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 space-x-reverse mb-8",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"افزودن به برنامه"})]}),V.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"جلسات شامل این تمرین"}),(0,r.jsx)("div",{className:"space-y-2",children:V.map((e,t)=>{let{session:s,sessionExercise:a,itemIndex:l,item:n}=e;return(0,r.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2 space-x-reverse text-gray-900 dark:text-white",children:(0,r.jsx)("span",{children:s.name})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse gap-2",children:[(0,r.jsx)(i(),{href:"/my-workouts?sessionId=".concat(s.id),title:"مشاهده جلسه",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(u,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>X(s.id,l,n),title:"ویرایش",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>W(s.id,l),title:"حذف",className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,r.jsx)(g.A,{className:"h-5 w-5"})})]})]}),a.notes&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-right",dir:"ltr",children:a.notes})]},"".concat(s.id,"-").concat(l,"-").concat(t))})})]})]}),l&&(0,r.jsx)(f,{isOpen:l,onClose:()=>o(!1),sessions:U.sessions,onAddToSessions:e=>{J({sessions:U.sessions.map(t=>{let s=e.find(e=>e.sessionId===t.id);if(s){if("superset"===s.mode&&s.partnerExerciseId){let e={exerciseId:s.partnerExerciseId,completed:!1,notes:s.partnerNotes},r={exerciseId:B.id,completed:!1,notes:s.notes};return{...t,items:[...t.items,{type:"superset",exercises:[r,e]}]}}let e={type:"single",exercise:{exerciseId:B.id,completed:!1,notes:s.notes}};return{...t,items:[...t.items,e]}}return t})})},exerciseId:B.id}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:A,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"حذف جلسه"}),(0,r.jsx)("button",{onClick:()=>{k(!1),N(null),I(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(h.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"تمرین از این جلسه حذف شود؟"}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:()=>{null!==j&&null!==w&&(J({sessions:U.sessions.map(e=>e.id===j?{...e,items:e.items.filter((e,t)=>t!==w)}:e)}),k(!1),N(null),I(null))},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,r.jsx)("button",{onClick:()=>{k(!1),N(null),I(null)},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),E&&M&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:T,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ویرایش تمرین"}),(0,r.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(h.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium ".concat("superset"===M.item.type?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-200":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:"superset"===M.item.type?"سوپرست":"سینگل‌ست"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"جلسه"}),(0,r.jsx)("select",{value:q,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:U.sessions.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["ست و تکرار ",B.name]}),(0,r.jsx)("input",{type:"text",dir:"ltr",value:_,onChange:e=>O(e.target.value),onKeyDown:G,placeholder:"3\xd712",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]}),"superset"===M.item.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["ست و تکرار ",(()=>{var e;let t=null==(e=M.item.exercises.find(e=>e.exerciseId!==B.id))?void 0:e.exerciseId,s=p.K.find(e=>e.id===t);return(null==s?void 0:s.name)||"تمرین دوم"})()]}),(0,r.jsx)("input",{type:"text",dir:"ltr",value:z,onChange:e=>F(e.target.value),onKeyDown:G,placeholder:"3\xd712",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse mt-6",children:[(0,r.jsx)("button",{onClick:Z,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"تأیید"}),(0,r.jsx)("button",{onClick:P,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})})]})}},1094:(e,t,s)=>{Promise.resolve().then(s.bind(s,873))},2056:(e,t,s)=>{"use strict";s.d(t,{Kg:()=>i,Ts:()=>d,Xc:()=>c,f$:()=>x,gL:()=>n,i4:()=>o});let r="tamrinsaz-user-data",a=e=>!!e&&"object"==typeof e&&"string"==typeof e.exerciseId&&"boolean"==typeof e.completed,l=e=>{if(!e||"object"!=typeof e)return null;if("single"===e.type&&a(e.exercise))return{type:"single",exercise:{...e.exercise,notes:e.exercise.notes||""}};if("superset"===e.type&&Array.isArray(e.exercises)&&2===e.exercises.length){let[t,s]=e.exercises;if(a(t)&&a(s))return{type:"superset",exercises:[{...t,notes:t.notes||""},{...s,notes:s.notes||""}]}}return null},i=e=>{var t;let s=e&&"object"==typeof e?e:{},r=[];Array.isArray(s.items)?s.items.forEach(e=>{let t=l(e);t&&r.push(t)}):Array.isArray(s.exercises)&&s.exercises.forEach(e=>{a(e)&&r.push({type:"single",exercise:{...e,notes:e.notes||""}})});let i=s.createdAt,n=i instanceof Date||"string"==typeof i||"number"==typeof i?new Date(i):new Date;return{id:(null==(t=s.id)?void 0:t.toString())||Date.now().toString(),name:"string"==typeof s.name?s.name:"جلسه جدید",createdAt:n,items:r}},n=()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);if(t.sessions&&Array.isArray(t.sessions))return t.sessions=t.sessions.map(e=>i(e)),t}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},d=e=>{try{let t={sessions:e.sessions.map(i)};localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error("Error saving user data:",e)}},o=()=>{let e=new Blob([JSON.stringify(n(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},c=e=>new Promise((t,s)=>{let r=new FileReader;r.onload=e=>{try{var r;let a=JSON.parse(null==(r=e.target)?void 0:r.result);if(!a.sessions||!Array.isArray(a.sessions))return void s(Error("Invalid data format"));a.sessions=a.sessions.map(e=>i(e)),t(a)}catch(e){s(e)}},r.onerror=()=>s(Error("Failed to read file")),r.readAsText(e)}),x=()=>{localStorage.removeItem(r)}},3104:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]])},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[508,771,925,441,684,358],()=>t(1094)),_N_E=e.O()}]);