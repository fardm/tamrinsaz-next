(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{1094:(e,t,s)=>{Promise.resolve().then(s.bind(s,7826))},2056:(e,t,s)=>{"use strict";s.d(t,{Ts:()=>l,Xc:()=>i,f$:()=>d,gL:()=>a,i4:()=>n});let r="tamrinsaz-user-data",a=()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);return t.sessions=t.sessions.map(e=>({...e,createdAt:new Date(e.createdAt)})),t}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},l=e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving user data:",e)}},n=()=>{let e=new Blob([JSON.stringify(a(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},i=e=>new Promise((t,s)=>{let r=new FileReader;r.onload=e=>{try{var r;let a=JSON.parse(null==(r=e.target)?void 0:r.result);a.sessions&&Array.isArray(a.sessions)?(a.sessions=a.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())})),t(a)):s(Error("Invalid data format"))}catch(e){s(e)}},r.onerror=()=>s(Error("Failed to read file")),r.readAsText(e)}),d=()=>{localStorage.removeItem(r)}},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7826:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var r=s(5155),a=s(2115),l=s(6874),n=s.n(l),i=s(5695),d=s(6766);let o=(0,s(2895).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=s(5196),x=s(3717),m=s(4416),h=s(4616),u=s(9925);let g=e=>"/images/".concat(e);function p(e){let{text:t,imageName:s,altText:a,onClick:l,filterValue:n}=e;return(0,r.jsxs)("div",{className:"\n        flex flex-col items-center p-2 rounded-lg\n        bg-gray-50 dark:bg-gray-800\n        border border-gray-200 dark:border-gray-700\n        transition-colors duration-200\n        ".concat(l?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-900 hover:border-gray-300 dark:hover:border-gray-600":"","\n      "),onClick:()=>{l&&n&&l(n)},children:[(0,r.jsx)("div",{className:"relative w-16 h-16 mb-1 rounded-lg bg-gray-200 dark:bg-gray-600 p-1 overflow-hidden",children:(0,r.jsx)(d.default,{src:g(s),alt:a,fill:!0,sizes:"64px",style:{objectFit:"contain"},onError:e=>{e.target.src="https://placehold.co/100x100/e0e0e0/000000?text=No+Image"}})}),(0,r.jsx)("span",{className:"text-sm font-medium text-center text-gray-900 dark:text-white",children:t})]})}var b=s(2144),y=s(2056);let f=(0,s(5028).default)(()=>s.e(762).then(s.bind(s,9762)).then(e=>e.AddToWorkoutModal),{loadableGenerated:{webpack:()=>[9762]},ssr:!1}),v=e=>{if(e)if(e.startsWith("http"))return e;else return"/images/".concat(e);return"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=800"};function j(e){let{id:t}=e,s=(0,i.useRouter)(),[l,g]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[k,w]=(0,a.useState)(null),C=(0,a.useRef)(null),[A,S]=(0,a.useState)(!1),[I,E]=(0,a.useState)(null),[L,O]=(0,a.useState)(""),R=(0,a.useRef)(null),[_,T]=(0,a.useState)({sessions:[]}),q=e=>{(0,y.Ts)(e),T(e)};(0,a.useEffect)(()=>{T((0,y.gL)())},[]);let M=(0,a.useCallback)(()=>{S(!1),E(null),O("")},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(l&&g(!1),j&&(N(!1),w(null)),A&&M())},t=e=>{var t;l&&document.getElementById("add-to-workout-modal-container")&&!(null==(t=document.getElementById("add-to-workout-modal-container"))?void 0:t.contains(e.target))&&g(!1),j&&C.current&&!C.current.contains(e.target)&&(N(!1),w(null)),A&&R.current&&!R.current.contains(e.target)&&M()};return(l||j||A)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",t)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[l,j,A,M]);let F=u.K.find(e=>e.id===t);if(!F)return(0,r.jsx)("div",{className:"max-w-[35rem] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"تمرین یافت نشد"}),(0,r.jsxs)(n(),{href:"/",className:"inline-flex items-center space-x-2 space-x-reverse text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,r.jsx)(o,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"بازگشت به صفحه اصلی"})]})]})});let z=_.sessions.map(e=>{let t=e.exercises.find(e=>e.exerciseId===F.id);return t?{session:e,sessionExercise:t}:null}).filter(Boolean),D=e=>{w(e),N(!0)},U=(e,t)=>{E(e),O(t||""),S(!0)},V=()=>{I&&F&&(q({sessions:_.sessions.map(e=>e.id===I?{...e,exercises:e.exercises.map(e=>e.exerciseId===F.id?{...e,notes:L.trim()||void 0}:e)}:e)}),S(!1),E(null),O(""))},B=e=>{let t=b.muscleOptions.find(t=>t.displayName===e||t.filterNames.includes(e));return t?t.imageName:"placeholder.webp"},J=e=>{s.push("/?filterField=targetMuscles&filterValue=".concat(encodeURIComponent(e)))};return(0,r.jsxs)("div",{className:"max-w-[35rem] mx-auto px-2 sm:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("div",{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"relative aspect-video flex items-center justify-center bg-white dark:bg-white rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden mb-4",children:(0,r.jsx)(d.default,{src:v(F.image),alt:F.name,fill:!0,sizes:"(max-width: 768px) 100vw, 35rem",style:{objectFit:"contain"},priority:!0})}),(0,r.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:F.name}),F.otherNames&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:F.otherNames})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"عضلات درگیر"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-start gap-4",children:F.targetMuscles.map((e,t)=>(0,r.jsx)(p,{text:e,imageName:B(e),altText:e,onClick:J,filterValue:e},t))})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"وسایل مورد نیاز"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-start",children:F.equipment&&(0,r.jsx)(p,{text:F.equipment,imageName:(e=>{let t=b.equipmentOptionsList.find(t=>t.displayName===e||t.filterName===e);return t?t.imageName:"placeholder.webp"})(F.equipment),altText:F.equipment,onClick:e=>{s.push("/?filterField=equipment&filterValue=".concat(encodeURIComponent(e)))},filterValue:F.equipment})})]}),F.type&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"نوع تمرین"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-start",children:(0,r.jsx)(p,{text:F.type,imageName:(e=>{let t=b.exerciseTypeOptions.find(t=>t.displayName===e||t.filterName===e);return t?t.imageName:"placeholder.webp"})(F.type),altText:F.type,onClick:e=>{s.push("/?filterField=type&filterValue=".concat(encodeURIComponent(e)))},filterValue:F.type})})]}),F.description&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"شرح تمرین"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400 leading-relaxed [&_a]:text-blue-600 [&_a]:hover:text-blue-700 dark:[&_a]:text-blue-400 dark:[&_a]:hover:text-blue-300",dangerouslySetInnerHTML:{__html:F.description}})]}),z.length>0&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"جلسات شامل این تمرین"}),(0,r.jsx)("div",{className:"space-y-2",children:z.map(e=>{let{session:t,sessionExercise:s}=e;return(0,r.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600 dark:text-green-400",children:[(0,r.jsx)(c.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:t.name})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse gap-2",children:[(0,r.jsx)(n(),{href:"/my-workouts?sessionId=".concat(t.id),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"مشاهده جلسه"}),(0,r.jsx)("button",{onClick:()=>U(t.id,s.notes),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>D(t.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]})]}),s.notes&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-right",children:s.notes})]},t.id)})})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 space-x-reverse",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"افزودن به برنامه"})]})})]})]}),l&&(0,r.jsx)(f,{isOpen:l,onClose:()=>g(!1),sessions:_.sessions,onAddToSessions:e=>{q({sessions:_.sessions.map(t=>{let s=e.find(e=>e.sessionId===t.id);if(s&&!t.exercises.some(e=>e.exerciseId===F.id)){let e={exerciseId:F.id,completed:!1,notes:s.notes};return{...t,exercises:[...t.exercises,e]}}return t})})},onCreateNewSession:e=>{let t={id:Date.now().toString(),name:e,exercises:[],createdAt:new Date};q({sessions:[..._.sessions,t]})},exerciseId:F.id}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:C,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"حذف جلسه"}),(0,r.jsx)("button",{onClick:()=>{N(!1),w(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"تمرین از این جلسه حذف شود؟"}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:()=>{k&&(q({sessions:_.sessions.map(e=>e.id===k?{...e,exercises:e.exercises.filter(e=>e.exerciseId!==F.id)}:e)}),N(!1),w(null))},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,r.jsx)("button",{onClick:()=>{N(!1),w(null)},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),A&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:R,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ویرایش توضیحات تمرین"}),(0,r.jsx)("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("input",{type:"text",value:L,onChange:e=>O(e.target.value),onKeyDown:e=>{"Enter"===e.key&&V()},placeholder:"توضیحات تمرین...",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:V,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"تأیید"}),(0,r.jsx)("button",{onClick:M,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[426,701,925,144,441,684,358],()=>t(1094)),_N_E=e.O()}]);