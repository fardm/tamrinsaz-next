(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{1094:(e,t,s)=>{Promise.resolve().then(s.bind(s,4596))},2056:(e,t,s)=>{"use strict";s.d(t,{Ts:()=>l,Xc:()=>n,f$:()=>i,gL:()=>a,i4:()=>d});let r="tamrinsaz-user-data",a=()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);return t.sessions=t.sessions.map(e=>({...e,createdAt:new Date(e.createdAt)})),t}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},l=e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving user data:",e)}},d=()=>{let e=new Blob([JSON.stringify(a(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},n=e=>new Promise((t,s)=>{let r=new FileReader;r.onload=e=>{try{var r;let a=JSON.parse(null==(r=e.target)?void 0:r.result);a.sessions&&Array.isArray(a.sessions)?(a.sessions=a.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())})),t(a)):s(Error("Invalid data format"))}catch(e){s(e)}},r.onerror=()=>s(Error("Failed to read file")),r.readAsText(e)}),i=()=>{localStorage.removeItem(r)}},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4596:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var r=s(5155),a=s(2115),l=s(6874),d=s.n(l),n=s(5695),i=s(6766);let o=(0,s(2895).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=s(4616),x=s(5196),u=s(3717),m=s(4416),h=s(9925),g=s(5028),b=s(2056);let p=(0,g.default)(()=>s.e(762).then(s.bind(s,9762)).then(e=>e.AddToWorkoutModal),{loadableGenerated:{webpack:()=>[9762]},ssr:!1}),y=e=>e?e.startsWith("http")?e:"/images/".concat(e):"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=800";function v(e){let{id:t}=e,s=(0,n.useRouter)(),[l,g]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1),[k,j]=(0,a.useState)(null),N=(0,a.useRef)(null),[w,A]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[I,E]=(0,a.useState)(""),L=(0,a.useRef)(null),[R,_]=(0,a.useState)({sessions:[]}),M=e=>{(0,b.Ts)(e),_(e)};(0,a.useEffect)(()=>{_((0,b.gL)())},[]);let O=(0,a.useCallback)(()=>{A(!1),S(null),E("")},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(l&&g(!1),v&&(f(!1),j(null)),w&&O())},t=e=>{var t;l&&document.getElementById("add-to-workout-modal-container")&&!(null==(t=document.getElementById("add-to-workout-modal-container"))?void 0:t.contains(e.target))&&g(!1),v&&N.current&&!N.current.contains(e.target)&&(f(!1),j(null)),w&&L.current&&!L.current.contains(e.target)&&O()};return(l||v||w)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",t)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[l,v,w,O]);let D=h.K.find(e=>e.id===t);if(!D)return(0,r.jsx)("div",{className:"max-w-[35rem] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"تمرین یافت نشد"}),(0,r.jsxs)(d(),{href:"/",className:"inline-flex items-center space-x-2 space-x-reverse text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,r.jsx)(o,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"بازگشت به صفحه اصلی"})]})]})});let F=R.sessions.map(e=>{let t=e.exercises.find(e=>e.exerciseId===D.id);return t?{session:e,sessionExercise:t}:null}).filter(Boolean),T=e=>{j(e),f(!0)},U=(e,t)=>{S(e),E(t||""),A(!0)},q=()=>{C&&D&&(M({sessions:R.sessions.map(e=>e.id===C?{...e,exercises:e.exercises.map(e=>e.exerciseId===D.id?{...e,notes:I.trim()||void 0}:e)}:e)}),A(!1),S(null),E(""))},z=e=>{s.push("/?filterField=targetMuscles&filterValue=".concat(encodeURIComponent(e)))},B=e=>{s.push("/?filterField=equipment&filterValue=".concat(encodeURIComponent(e)))},J=e=>{s.push("/?filterField=type&filterValue=".concat(encodeURIComponent(e)))};return(0,r.jsxs)("main",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 md:w-[65vw] mx-auto my-8 px-4",children:[(0,r.jsxs)("div",{className:"col-span-1 md:col-span-4 rounded-lg grid gap-6",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:D.name}),D.otherNames&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:D.otherNames}),(0,r.jsxs)("div",{className:"flex flex-col divide-y-2 divide-gray-200/10",children:[(0,r.jsxs)("div",{className:"flex gap-2 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"عضلات درگیر:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:D.targetMuscles.map((e,t)=>(0,r.jsx)("button",{onClick:()=>z(e),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-3",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex gap-2 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"وسایل مورد نیاز:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:D.equipment&&(0,r.jsx)("button",{onClick:()=>B(D.equipment),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-3",children:D.equipment})})]}),D.type&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex gap-2 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"نوع تمرین:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsx)("button",{onClick:()=>J(D.type),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-3",children:D.type})})]})})]})]}),D.description&&(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"شرح تمرین"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400 leading-relaxed [&_a]:text-blue-600 [&_a]:hover:text-blue-700 dark:[&_a]:text-blue-400 dark:[&_a]:hover:text-blue-300",dangerouslySetInnerHTML:{__html:D.description}})]})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2 p-4 border rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-fit",children:[(0,r.jsx)("div",{className:"relative aspect-video flex items-center justify-center rounded-lg overflow-hidden mb-8",children:(0,r.jsx)(i.default,{src:y(D.image),alt:D.name,fill:!0,sizes:"(max-width: 768px) 100vw, 20rem",priority:!0})}),(0,r.jsxs)("button",{onClick:()=>g(!0),className:"w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 space-x-reverse mb-8",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"افزودن به برنامه"})]}),F.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"جلسات شامل این تمرین"}),(0,r.jsx)("div",{className:"space-y-2",children:F.map(e=>{let{session:t,sessionExercise:s}=e;return(0,r.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600 dark:text-green-400",children:[(0,r.jsx)(x.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:t.name})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse gap-2",children:[(0,r.jsx)(d(),{href:"/my-workouts?sessionId=".concat(t.id),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"مشاهده جلسه"}),(0,r.jsx)("button",{onClick:()=>U(t.id,s.notes),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(u.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>T(t.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]})]}),s.notes&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-right",children:s.notes})]},t.id)})})]})]}),l&&(0,r.jsx)(p,{isOpen:l,onClose:()=>g(!1),sessions:R.sessions,onAddToSessions:e=>{M({sessions:R.sessions.map(t=>{let s=e.find(e=>e.sessionId===t.id);if(s&&!t.exercises.some(e=>e.exerciseId===D.id)){let e={exerciseId:D.id,completed:!1,notes:s.notes};return{...t,exercises:[...t.exercises,e]}}return t})})},onCreateNewSession:e=>{let t={id:Date.now().toString(),name:e,exercises:[],createdAt:new Date};M({sessions:[...R.sessions,t]})},exerciseId:D.id}),v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:N,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"حذف جلسه"}),(0,r.jsx)("button",{onClick:()=>{f(!1),j(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"تمرین از این جلسه حذف شود؟"}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:()=>{k&&(M({sessions:R.sessions.map(e=>e.id===k?{...e,exercises:e.exercises.filter(e=>e.exerciseId!==D.id)}:e)}),f(!1),j(null))},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,r.jsx)("button",{onClick:()=>{f(!1),j(null)},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),w&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:L,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ویرایش توضیحات تمرین"}),(0,r.jsx)("button",{onClick:O,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("input",{type:"text",value:I,onChange:e=>E(e.target.value),onKeyDown:e=>{"Enter"===e.key&&q()},placeholder:"توضیحات تمرین...",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:q,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"تأیید"}),(0,r.jsx)("button",{onClick:O,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})})]})}},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[426,701,925,441,684,358],()=>t(1094)),_N_E=e.O()}]);