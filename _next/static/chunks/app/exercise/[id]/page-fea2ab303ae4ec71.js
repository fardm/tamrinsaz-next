(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{1094:(e,r,t)=>{Promise.resolve().then(t.bind(t,5949))},2056:(e,r,t)=>{"use strict";t.d(r,{Ts:()=>l,Xc:()=>n,f$:()=>i,gL:()=>a,i4:()=>d});let s="tamrinsaz-user-data",a=()=>{try{let e=localStorage.getItem(s);if(e){let r=JSON.parse(e);return r.sessions=r.sessions.map(e=>({...e,createdAt:new Date(e.createdAt)})),r}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},l=e=>{try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error saving user data:",e)}},d=()=>{let e=new Blob([JSON.stringify(a(),null,2)],{type:"application/json"}),r=URL.createObjectURL(e),t=document.createElement("a");t.href=r,t.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r)},n=e=>new Promise((r,t)=>{let s=new FileReader;s.onload=e=>{try{var s;let a=JSON.parse(null==(s=e.target)?void 0:s.result);a.sessions&&Array.isArray(a.sessions)?(a.sessions=a.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())})),r(a)):t(Error("Invalid data format"))}catch(e){t(e)}},s.onerror=()=>t(Error("Failed to read file")),s.readAsText(e)}),i=()=>{localStorage.removeItem(s)}},3717:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4616:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5949:(e,r,t)=>{"use strict";t.d(r,{default:()=>k});var s=t(5155),a=t(2115),l=t(5695),d=t(6874),n=t.n(d),i=t(6766);let o=(0,t(2895).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=t(5196),x=t(3717),m=t(4416),g=t(4616),u=t(9925);function h(e){let{isOpen:r,onClose:t,sessions:l,onAddToSessions:d,onCreateNewSession:n,exerciseId:i}=e,[o,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)([]),[p,f]=(0,a.useState)(""),v=(0,a.useRef)(null);if((0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()},s=e=>{v.current&&!v.current.contains(e.target)&&t()};return r&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",s)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",s)}},[r,t]),!r)return null;let k=l.filter(e=>!e.exercises.some(e=>e.exerciseId===i)),j=e=>{y(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},N=()=>{o.trim()&&(n(o.trim()),x(""),h(!1))},w=b.length>0;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:v,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"افزودن به برنامه"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto space-y-3 p-3 -mr-2",children:[" ",k.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"جلسات موجود:"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>(0,s.jsxs)("div",{onClick:()=>j(e.id),className:"relative flex flex-col items-center p-3 border rounded-lg cursor-pointer transition-all duration-200\n                      ".concat(b.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/40":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500"),children:[(0,s.jsxs)("div",{className:"flex-1 text-center",children:[" ",(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.exercises.length," تمرین"]})]}),b.includes(e.id)&&(0,s.jsx)("div",{className:"absolute top-1 right-1 bg-blue-600 rounded-full p-0.5",children:(0,s.jsx)(c.A,{className:"h-3 w-3 text-white"})})]},e.id))})]}):(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"جلسه‌ای موجود نیست"})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3 mt-4 flex-shrink-0",children:u?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&N()},placeholder:"نام جلسه جدید...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),(0,s.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:N,disabled:!o.trim(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"ایجاد"}),(0,s.jsx)("button",{onClick:()=>{h(!1),x(""),f("")},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]}):(0,s.jsxs)("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center space-x-2 space-x-reverse py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"ایجاد جلسه جدید"})]})}),(0,s.jsxs)("div",{className:"flex-shrink-0 mt-10",children:[" ",(0,s.jsx)("label",{htmlFor:"exercise-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"توضیحات تمرین (اختیاری):"}),(0,s.jsx)("input",{type:"text",id:"exercise-notes",value:p,onChange:e=>f(e.target.value),placeholder:"3 ست 10 تکرار",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\n              ".concat(w?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700 cursor-not-allowed opacity-70"),disabled:!w,readOnly:!w})]}),(0,s.jsx)("button",{onClick:()=>{b.length>0&&(d(b.map(e=>({sessionId:e,notes:p}))),y([]),f(""),t())},disabled:!w,className:"w-full mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:"افزودن"})]})})}let b=e=>"/images/".concat(e);function y(e){let{text:r,imageName:t,altText:a,onClick:l,filterValue:d}=e;return(0,s.jsxs)("div",{className:"\n        flex flex-col items-center p-2 rounded-lg\n        bg-gray-50 dark:bg-gray-800\n        border border-gray-200 dark:border-gray-700\n        transition-colors duration-200\n        ".concat(l?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-900 hover:border-gray-300 dark:hover:border-gray-600":"","\n      "),onClick:()=>{l&&d&&l(d)},children:[(0,s.jsx)("div",{className:"relative w-16 h-16 mb-1 rounded-lg bg-gray-200 dark:bg-gray-600 p-1 overflow-hidden",children:(0,s.jsx)(i.default,{src:b(t),alt:a,fill:!0,sizes:"64px",style:{objectFit:"contain"},onError:e=>{e.target.src="https://placehold.co/100x100/e0e0e0/000000?text=No+Image"}})}),(0,s.jsx)("span",{className:"text-sm font-medium text-center text-gray-900 dark:text-white",children:r})]})}var p=t(2144),f=t(2056);let v=e=>{if(e)if(e.startsWith("http"))return e;else return"/images/".concat(e);return"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=800"};function k(){let{id:e}=(0,l.useParams)(),r=(0,l.useRouter)(),[t,d]=(0,a.useState)(!1),[b,k]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),w=(0,a.useRef)(null),[C,E]=(0,a.useState)(!1),[A,S]=(0,a.useState)(null),[I,L]=(0,a.useState)(""),R=(0,a.useRef)(null),[_,O]=(0,a.useState)({sessions:[]}),F=e=>{(0,f.Ts)(e),O(e)};(0,a.useEffect)(()=>{O((0,f.gL)())},[]);let q=(0,a.useCallback)(()=>{E(!1),S(null),L("")},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(t&&d(!1),b&&(k(!1),N(null)),C&&q())},r=e=>{var r;t&&document.getElementById("add-to-workout-modal-container")&&!(null==(r=document.getElementById("add-to-workout-modal-container"))?void 0:r.contains(e.target))&&d(!1),b&&w.current&&!w.current.contains(e.target)&&(k(!1),N(null)),C&&R.current&&!R.current.contains(e.target)&&q()};return(t||b||C)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",r)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",r)}},[t,b,C,q]);let z=u.K.find(r=>r.id===e);if(!z)return(0,s.jsx)("div",{className:"max-w-[35rem] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"تمرین یافت نشد"}),(0,s.jsxs)(n(),{href:"/",className:"inline-flex items-center space-x-2 space-x-reverse text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,s.jsx)(o,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"بازگشت به صفحه اصلی"})]})]})});let D=_.sessions.map(e=>{let r=e.exercises.find(e=>e.exerciseId===z.id);return r?{session:e,sessionExercise:r}:null}).filter(Boolean),M=e=>{N(e),k(!0)},T=(e,r)=>{S(e),L(r||""),E(!0)},U=()=>{A&&z&&(F({sessions:_.sessions.map(e=>e.id===A?{...e,exercises:e.exercises.map(e=>e.exerciseId===z.id?{...e,notes:I.trim()||void 0}:e)}:e)}),E(!1),S(null),L(""))},P=e=>{let r=p.AF.find(r=>r.displayName===e||r.filterNames.includes(e));return r?r.imageName:"placeholder.webp"},B=e=>{r.push("/?filterField=targetMuscles&filterValue=".concat(encodeURIComponent(e)))};return(0,s.jsxs)("div",{className:"max-w-[35rem] mx-auto px-2 sm:px-6 lg:px-8 py-6",children:[(0,s.jsxs)("div",{className:"overflow-hidden",children:[(0,s.jsx)("div",{className:"relative aspect-video flex items-center justify-center bg-white dark:bg-white rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden mb-4",children:(0,s.jsx)(i.default,{src:v(z.image),alt:z.name,fill:!0,sizes:"(max-width: 768px) 100vw, 35rem",style:{objectFit:"contain"},priority:!0})}),(0,s.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:z.name}),z.otherNames&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:z.otherNames})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"عضلات درگیر"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-start gap-4",children:z.targetMuscles.map((e,r)=>(0,s.jsx)(y,{text:e,imageName:P(e),altText:e,onClick:B,filterValue:e},r))})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"وسایل مورد نیاز"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-start",children:z.equipment&&(0,s.jsx)(y,{text:z.equipment,imageName:(e=>{let r=p.r4.find(r=>r.displayName===e||r.filterName===e);return r?r.imageName:"placeholder.webp"})(z.equipment),altText:z.equipment,onClick:e=>{r.push("/?filterField=equipment&filterValue=".concat(encodeURIComponent(e)))},filterValue:z.equipment})})]}),z.description&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"شرح تمرین"}),(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400 leading-relaxed [&_a]:text-blue-600 [&_a]:hover:text-blue-700 dark:[&_a]:text-blue-400 dark:[&_a]:hover:text-blue-300",dangerouslySetInnerHTML:{__html:z.description}})]}),D.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"جلسات شامل این تمرین"}),(0,s.jsx)("div",{className:"space-y-2",children:D.map(e=>{let{session:r,sessionExercise:t}=e;return(0,s.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600 dark:text-green-400",children:[(0,s.jsx)(c.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:r.name})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse gap-2",children:[(0,s.jsx)(n(),{href:"/my-workouts?sessionId=".concat(r.id),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"مشاهده جلسه"}),(0,s.jsx)("button",{onClick:()=>T(r.id,t.notes),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(x.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>M(r.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]})]}),t.notes&&(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-right",children:t.notes})]},r.id)})})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"افزودن به برنامه"})]})})]})]}),(0,s.jsx)(h,{isOpen:t,onClose:()=>d(!1),sessions:_.sessions,onAddToSessions:e=>{F({sessions:_.sessions.map(r=>{let t=e.find(e=>e.sessionId===r.id);if(t&&!r.exercises.some(e=>e.exerciseId===z.id)){let e={exerciseId:z.id,completed:!1,notes:t.notes};return{...r,exercises:[...r.exercises,e]}}return r})})},onCreateNewSession:e=>{let r={id:Date.now().toString(),name:e,exercises:[],createdAt:new Date};F({sessions:[..._.sessions,r]})},exerciseId:z.id}),b&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:w,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"حذف جلسه"}),(0,s.jsx)("button",{onClick:()=>{k(!1),N(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"تمرین از این جلسه حذف شود؟"}),(0,s.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{j&&(F({sessions:_.sessions.map(e=>e.id===j?{...e,exercises:e.exercises.filter(e=>e.exerciseId!==z.id)}:e)}),k(!1),N(null))},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,s.jsx)("button",{onClick:()=>{k(!1),N(null)},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),C&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:R,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ویرایش توضیحات تمرین"}),(0,s.jsx)("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("input",{type:"text",value:I,onChange:e=>L(e.target.value),onKeyDown:e=>{"Enter"===e.key&&U()},placeholder:"توضیحات تمرین...",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0}),(0,s.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:U,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"تأیید"}),(0,s.jsx)("button",{onClick:q,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[15,766,925,144,441,684,358],()=>r(1094)),_N_E=e.O()}]);