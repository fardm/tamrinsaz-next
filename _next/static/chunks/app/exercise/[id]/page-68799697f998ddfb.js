(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{873:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var r=s(5155),a=s(2115),l=s(6874),d=s.n(l),n=s(5695),i=s(6766),o=s(2895);let c=(0,o.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var x=s(4616);let u=(0,o.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=s(3717),m=s(3104),g=s(4416),b=s(9925),p=s(5028),y=s(2056);let v=(0,p.default)(()=>s.e(762).then(s.bind(s,9762)).then(e=>e.AddToWorkoutModal),{loadableGenerated:{webpack:()=>[9762]},ssr:!1}),k=e=>e?e.startsWith("http")?e:"/images/".concat(e):"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=800";function f(e){let{id:t}=e,s=(0,n.useRouter)(),[l,o]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),w=(0,a.useRef)(null),[A,C]=(0,a.useState)(!1),[S,E]=(0,a.useState)(null),[I,L]=(0,a.useState)(""),M=(0,a.useRef)(null),[R,_]=(0,a.useState)({sessions:[]}),O=e=>{(0,y.Ts)(e),_(e)};(0,a.useEffect)(()=>{_((0,y.gL)())},[]);let z=(0,a.useCallback)(()=>{C(!1),E(null),L("")},[]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(l&&o(!1),p&&(f(!1),N(null)),A&&z())},t=e=>{var t;l&&document.getElementById("add-to-workout-modal-container")&&!(null==(t=document.getElementById("add-to-workout-modal-container"))?void 0:t.contains(e.target))&&o(!1),p&&w.current&&!w.current.contains(e.target)&&(f(!1),N(null)),A&&M.current&&!M.current.contains(e.target)&&z()};return(l||p||A)&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",t)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[l,p,A,z]);let q=b.K.find(e=>e.id===t);if(!q)return(0,r.jsx)("div",{className:"max-w-[35rem] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"تمرین یافت نشد"}),(0,r.jsxs)(d(),{href:"/",className:"inline-flex items-center space-x-2 space-x-reverse text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,r.jsx)(c,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"بازگشت به صفحه اصلی"})]})]})});let D=R.sessions.map(e=>{let t=e.exercises.find(e=>e.exerciseId===q.id);return t?{session:e,sessionExercise:t}:null}).filter(Boolean),F=e=>{N(e),f(!0)},T=(e,t)=>{E(e),L(t||""),C(!0)},U=()=>{S&&q&&(O({sessions:R.sessions.map(e=>e.id===S?{...e,exercises:e.exercises.map(e=>e.exerciseId===q.id?{...e,notes:I.trim()||void 0}:e)}:e)}),C(!1),E(null),L(""))},B=e=>{s.push("/?filterField=targetMuscles&filterValue=".concat(encodeURIComponent(e)))},J=e=>{s.push("/?filterField=equipment&filterValue=".concat(encodeURIComponent(e)))},P=e=>{s.push("/?filterField=type&filterValue=".concat(encodeURIComponent(e)))};return(0,r.jsxs)("main",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 max-w-7xl mx-auto px-1 sm:px-2 lg:px-8 my-8",children:[(0,r.jsxs)("div",{className:"col-span-1 md:col-span-4 rounded-lg space-y-6",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-fit",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:q.name}),q.otherNames&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:q.otherNames}),(0,r.jsxs)("div",{className:"flex flex-col divide-y-2 divide-gray-100 dark:divide-gray-200/10",children:[(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"عضلات درگیر:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:q.targetMuscles.map((e,t)=>(0,r.jsx)("button",{onClick:()=>B(e),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"وسایل مورد نیاز:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:q.equipment&&(0,r.jsx)("button",{onClick:()=>J(q.equipment),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:q.equipment})})]}),q.type&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex gap-1 py-4",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"نوع تمرین:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsx)("button",{onClick:()=>P(q.type),className:"text-blue-800 hover:text-blue-500 dark:text-blue-200 dark:hover:text-blue-100 bg-blue-100 hover:bg-blue-50 dark:bg-blue-900/40 hover:dark:bg-blue-800/70 rounded-full px-2",children:q.type})})]})})]})]}),q.description&&(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:"شرح تمرین"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400 leading-relaxed [&_a]:text-blue-600 [&_a]:hover:text-blue-700 dark:[&_a]:text-blue-400 dark:[&_a]:hover:text-blue-300",dangerouslySetInnerHTML:{__html:q.description}})]})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2 p-4 border rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-fit",children:[(0,r.jsx)("div",{className:"relative aspect-video flex items-center justify-center rounded-lg overflow-hidden mb-8",children:(0,r.jsx)(i.default,{src:k(q.image),alt:q.name,fill:!0,sizes:"(max-width: 768px) 100vw, 20rem",priority:!0})}),(0,r.jsxs)("button",{onClick:()=>o(!0),className:"w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 space-x-reverse mb-8",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"افزودن به برنامه"})]}),D.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"جلسات شامل این تمرین"}),(0,r.jsx)("div",{className:"space-y-2",children:D.map(e=>{let{session:t,sessionExercise:s}=e;return(0,r.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600 dark:text-green-400",children:(0,r.jsx)("span",{children:t.name})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse gap-2",children:[(0,r.jsx)(d(),{href:"/my-workouts?sessionId=".concat(t.id),title:"مشاهده جلسه",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:(0,r.jsx)(u,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>T(t.id,s.notes),title:"ویرایش",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(h.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>F(t.id),title:"حذف",className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})})]})]}),s.notes&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-right",children:s.notes})]},t.id)})})]})]}),l&&(0,r.jsx)(v,{isOpen:l,onClose:()=>o(!1),sessions:R.sessions,onAddToSessions:e=>{O({sessions:R.sessions.map(t=>{let s=e.find(e=>e.sessionId===t.id);if(s&&!t.exercises.some(e=>e.exerciseId===q.id)){let e={exerciseId:q.id,completed:!1,notes:s.notes};return{...t,exercises:[...t.exercises,e]}}return t})})},onCreateNewSession:e=>{let t={id:Date.now().toString(),name:e,exercises:[],createdAt:new Date};O({sessions:[...R.sessions,t]})},exerciseId:q.id}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:w,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"حذف جلسه"}),(0,r.jsx)("button",{onClick:()=>{f(!1),N(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(g.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"تمرین از این جلسه حذف شود؟"}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:()=>{j&&(O({sessions:R.sessions.map(e=>e.id===j?{...e,exercises:e.exercises.filter(e=>e.exerciseId!==q.id)}:e)}),f(!1),N(null))},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"حذف"}),(0,r.jsx)("button",{onClick:()=>{f(!1),N(null)},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})}),A&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{ref:M,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ویرایش توضیحات تمرین"}),(0,r.jsx)("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(g.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("input",{type:"text",value:I,onChange:e=>L(e.target.value),onKeyDown:e=>{"Enter"===e.key&&U()},placeholder:"توضیحات تمرین...",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,r.jsx)("button",{onClick:U,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"تأیید"}),(0,r.jsx)("button",{onClick:z,className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]})})]})}},1094:(e,t,s)=>{Promise.resolve().then(s.bind(s,873))},2056:(e,t,s)=>{"use strict";s.d(t,{Ts:()=>l,Xc:()=>n,f$:()=>i,gL:()=>a,i4:()=>d});let r="tamrinsaz-user-data",a=()=>{try{let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);return t.sessions=t.sessions.map(e=>({...e,createdAt:new Date(e.createdAt)})),t}}catch(e){console.error("Error loading user data:",e)}return{sessions:[]}},l=e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving user data:",e)}},d=()=>{let e=new Blob([JSON.stringify(a(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="tamrinsaz-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},n=e=>new Promise((t,s)=>{let r=new FileReader;r.onload=e=>{try{var r;let a=JSON.parse(null==(r=e.target)?void 0:r.result);a.sessions&&Array.isArray(a.sessions)?(a.sessions=a.sessions.map(e=>({...e,createdAt:new Date(e.createdAt||Date.now())})),t(a)):s(Error("Invalid data format"))}catch(e){s(e)}},r.onerror=()=>s(Error("Failed to read file")),r.readAsText(e)}),i=()=>{localStorage.removeItem(r)}},3104:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]])},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[426,701,925,441,684,358],()=>t(1094)),_N_E=e.O()}]);