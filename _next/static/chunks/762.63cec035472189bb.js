"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{9762:(e,r,a)=>{a.r(r),a.d(r,{AddToWorkoutModal:()=>n});var t=a(5155),s=a(2115),l=a(4416),d=a(9925);function n(e){var r;let{isOpen:a,onClose:n,sessions:o,onAddToSessions:c,exerciseId:i}=e,[g,x]=(0,s.useState)(""),[u,y]=(0,s.useState)(""),[b,m]=(0,s.useState)(""),[h,p]=(0,s.useState)("single"),[k,f]=(0,s.useState)(""),[v,j]=(0,s.useState)(null),N=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n()},r=e=>{N.current&&!N.current.contains(e.target)&&n()};return a&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",r)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",r)}},[a,n]);let w=(0,s.useMemo)(()=>d.K.filter(e=>e.id!==i&&e.name.toLowerCase().includes(k.toLowerCase())).slice(0,10),[i,k]);if(!a)return null;let C=!!g,E="superset"===h;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{ref:N,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"افزودن به برنامه"}),(0,t.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,t.jsx)(l.A,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"نوع تمرین"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-800 dark:text-gray-200",children:[(0,t.jsx)("input",{type:"radio",name:"add-mode",value:"single",checked:"single"===h,onChange:()=>p("single"),className:"text-blue-600 focus:ring-blue-500"}),"سینگل‌ست"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-800 dark:text-gray-200",children:[(0,t.jsx)("input",{type:"radio",name:"add-mode",value:"superset",checked:"superset"===h,onChange:()=>p("superset"),className:"text-blue-600 focus:ring-blue-500"}),"سوپرست"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"انتخاب جلسه"}),o.length>0?(0,t.jsxs)("select",{value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"یک جلسه را انتخاب کنید"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"جلسه‌ای پیدا نشد. از صفحه برنامه من جلسه جدید بسازید."})]}),E&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"تمرین دوم سوپرست را انتخاب کنید"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>f(e.target.value),placeholder:"جستجو...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsxs)("div",{className:"max-h-40 overflow-y-auto space-y-2",children:[0===w.length&&(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"تمرینی یافت نشد."}),w.map(e=>(0,t.jsx)("button",{onClick:()=>j(e.id),className:"w-full text-right px-3 py-2 rounded-lg border transition-colors ".concat(v===e.id?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:e.name},e.id))]}),v&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[(0,t.jsxs)("span",{children:["انتخاب شده: ",null==(r=d.K.find(e=>e.id===v))?void 0:r.name]}),(0,t.jsx)("button",{className:"text-red-500 hover:text-red-600",onClick:()=>j(null),children:"حذف"})]})]}),E?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"exercise-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ست و تکرار تمرین فعلی"}),(0,t.jsx)("input",{type:"text",dir:"ltr",id:"exercise-notes",value:u,onChange:e=>y(e.target.value),placeholder:"3\xd712",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\n                    ".concat(C?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700"),disabled:!C,readOnly:!C})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"partner-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ست و تکرار تمرین دوم"}),(0,t.jsx)("input",{type:"text",dir:"ltr",id:"partner-notes",value:b,onChange:e=>m(e.target.value),placeholder:"3\xd712",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\n                    ".concat(C?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700"),disabled:!C,readOnly:!C})]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"exercise-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ست و تکرار"}),(0,t.jsx)("input",{type:"text",dir:"ltr",id:"exercise-notes",value:u,onChange:e=>y(e.target.value),placeholder:"3\xd712",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\n                  ".concat(C?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700"),disabled:!C,readOnly:!C})]})]}),(0,t.jsx)("button",{onClick:()=>{g&&("superset"!==h||v)&&(c([{sessionId:g,notes:u,partnerNotes:E?b:void 0,mode:h,partnerExerciseId:"superset"===h&&null!=v?v:void 0}]),x(""),y(""),m(""),j(null),f(""),p("single"),n())},disabled:!C||E&&!v,className:"w-full mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:E?"افزودن سوپرست":"افزودن"})]})})}}}]);