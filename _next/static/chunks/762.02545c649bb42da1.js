"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{9762:(e,r,t)=>{t.r(r),t.d(r,{AddToWorkoutModal:()=>n});var a=t(5155),s=t(2115),d=t(4416),l=t(5196),o=t(4616);function n(e){let{isOpen:r,onClose:t,sessions:n,onAddToSessions:i,onCreateNewSession:c,exerciseId:g}=e,[x,u]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[h,m]=(0,s.useState)([]),[k,f]=(0,s.useState)(""),p=(0,s.useRef)(null);if((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()},a=e=>{p.current&&!p.current.contains(e.target)&&t()};return r&&(document.body.style.overflow="hidden",document.addEventListener("keydown",e),document.addEventListener("mousedown",a)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",e),document.removeEventListener("mousedown",a)}},[r,t]),!r)return null;let v=n.filter(e=>!e.exercises.some(e=>e.exerciseId===g)),w=e=>{m(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},j=()=>{x.trim()&&(c(x.trim()),u(""),y(!1))},N=h.length>0;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{ref:p,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"افزودن به برنامه"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex-grow overflow-y-auto space-y-3 p-3 -mr-2",children:[" ",v.length>0?(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"جلسات موجود:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:v.map(e=>(0,a.jsxs)("div",{onClick:()=>w(e.id),className:"relative flex flex-col items-center p-3 border rounded-lg cursor-pointer transition-all duration-200\n                      ".concat(h.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/40":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500"),children:[(0,a.jsxs)("div",{className:"flex-1 text-center",children:[" ",(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.exercises.length," تمرین"]})]}),h.includes(e.id)&&(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-blue-600 rounded-full p-0.5",children:(0,a.jsx)(l.A,{className:"h-3 w-3 text-white"})})]},e.id))})]}):(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"جلسه‌ای موجود نیست"})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3 mt-4 flex-shrink-0",children:b?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&j()},placeholder:"نام جلسه جدید...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,a.jsx)("button",{onClick:j,disabled:!x.trim(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"ایجاد"}),(0,a.jsx)("button",{onClick:()=>{y(!1),u(""),f("")},className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"لغو"})]})]}):(0,a.jsxs)("button",{onClick:()=>y(!0),className:"w-full flex items-center justify-center space-x-2 space-x-reverse py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ایجاد جلسه جدید"})]})}),(0,a.jsxs)("div",{className:"flex-shrink-0 mt-10",children:[" ",(0,a.jsx)("label",{htmlFor:"exercise-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"توضیحات تمرین (اختیاری):"}),(0,a.jsx)("input",{type:"text",id:"exercise-notes",value:k,onChange:e=>f(e.target.value),placeholder:"3 ست 10 تکرار",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\n              ".concat(N?"border-gray-300 dark:border-gray-600":"border-gray-200 dark:border-gray-700 cursor-not-allowed opacity-70"),disabled:!N,readOnly:!N})]}),(0,a.jsx)("button",{onClick:()=>{h.length>0&&(i(h.map(e=>({sessionId:e,notes:k}))),m([]),f(""),t())},disabled:!N,className:"w-full mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:"افزودن"})]})})}}}]);